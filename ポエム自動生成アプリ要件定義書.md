# 要件定義書

## プロジェクト概要

本プロジェクトは、コスプレイヤーやSNSユーザー向けに、写真やキャラクター情報を元にポエムを自動生成するツールを開発します。  
AI技術を活用し、以下2種類のポエム生成機能を提供します：

1. アップロードされた画像の雰囲気を解析して生成。
2. ユーザーが提供したキャラクター情報を基に生成。  

ユーザーが生成されたポエムを評価する機能も提供し、収集した評価データをAIモデルの改善に活用します。  
また、アフィリエイト広告を通じた収益化も目指します。

---

## 1. システム概要

### 1.1 ユーザー層

- コスプレイヤー
- 写真投稿を行うSNSユーザー
- キャラクタークリエイターやファンコミュニティのメンバー

### 1.2 主な機能

1. **写真アップロード機能**  
   - ユーザーが自身の写真をアップロードできる。
2. **ポエム自動生成機能**  
   - 以下の2種類の生成方法を提供：
     1. **画像の雰囲気から生成**  
        - アップロードされた写真の雰囲気をAIが解析し、ポエムを生成。
     2. **キャラクター情報から生成**  
        - ユーザーが提供したキャラクター情報（名前、特徴、セリフなど）を基にポエムを生成。  
        - 入力されたキャラクター情報をAIモデルが同時に学習し、将来の生成精度を向上。
3. **ポエム評価機能**  
   - 生成されたポエムに対して、ユーザーが「良い」「悪い」で評価可能。
   - 評価データを収集し、モデル改善に利用。
4. **ポエムのカスタマイズ機能**  
   - ユーザーが生成されたポエムを編集できる。
5. **SNS連携機能**  
   - 生成されたポエムと写真をSNSに直接投稿可能。
6. **言語選択機能**  
   - 初期は日本語対応、将来的に多言語対応を追加。
7. **アフィリエイト広告の表示**  
   - ユーザー体験を損なわない範囲で1～2つの広告を掲載。

---

## 2. フロントエンド

### 2.1 技術スタック

- **フレームワーク**: React
- **スタイリング**: Tailwind CSS または Material-UI
- **状態管理**: Redux または Context API

### 2.2 UI要件

1. **写真アップロード画面**
   - ドラッグ＆ドロップ機能
   - アップロードした写真のプレビュー
2. **ポエム生成画面**
   - 画像の雰囲気から生成されたポエムの表示
   - キャラクター情報から生成されたポエムの表示
   - ポエム評価機能（「良い」「悪い」のボタンを設置）
     - ユーザーの選択内容をバックエンドに送信。
3. **キャラクター情報入力画面**
   - キャラクター名、特徴、セリフを入力する簡易フォーム
   - 入力内容のプレビュー機能
4. **SNS連携画面**
   - 投稿完了後、SNS共有ボタンの表示

---

## 3. バックエンド

### 3.1 技術スタック

- **フレームワーク**: Python (FastAPI)
- **AIモデル**: OpenAI GPT または Hugging Face Transformers
- **データベース**: DynamoDB または PostgreSQL
- **写真保存**: S3 (AWS)

### 3.2 主なAPIエンドポイント

1. `/upload-photo` (POST)  
   - 写真をアップロードし、S3に保存。
2. `/generate-theme` (POST)  
   - 写真の雰囲気をAIで解析し、テーマを生成。
3. `/submit-character` (POST)  
   - ユーザーが提供したキャラクター情報を保存。
   - 同時にキャラクター情報をAIモデルが学習。
4. `/generate-poem` (POST)  
   - 以下2種類のポエム生成を実行：
     - 写真の雰囲気から生成。
     - キャラクター情報から生成。
5. `/rate-poem` (POST)  
   - ユーザーが評価したポエムの評価データを保存。
6. `/customize-poem` (PUT)  
   - ユーザーが編集したポエムを保存。
7. `/share-on-sns` (POST)  
   - SNS投稿用データを生成。

---

## 4. ポエム自動生成機能

### 4.1 画像の雰囲気から生成

#### 入力

- ユーザーがアップロードした写真。

#### 処理

1. AIモデルが写真を解析し、テーマ（例: 「幻想的」「冒険」「悲劇」など）を抽出。
2. 抽出されたテーマを基にポエムを生成。

#### 出力例

- **テーマ**: 「幻想的」
- **生成されたポエム**:

  ```text
  夜空に輝く星々、  
  その光に秘められた物語。  
  静寂の中に響く声、  
  幻想は夢の中で生き続ける。
  ```

### 4.2 キャラクター情報から生成

#### 入力

- ユーザーが提供したキャラクター情報：
  - キャラクター名
  - 作品名
  - 特徴（性格、外見、能力など）
  - セリフ（任意で複数）

#### 処理

1. 入力された情報を基にAIモデルがキャラクターの特徴を学習。
2. 学習した特徴を反映したポエムを生成。

#### 出力例

- **キャラクター情報**:
  - 名前: ミコト
  - 特徴: 勇敢、冷静、雷を操る能力を持つ
- **生成されたポエム**:

  ```text
  雷鳴轟く夜空の下で、  
  勇気の炎が心に灯る。  
  運命の道を切り開く者、  
  その名はミコト。
  ```

---

## 5. ポエム評価機能

### 5.1 評価方法

- ポエム生成画面に「良い」「悪い」の2種類の評価ボタンを設置。
- ユーザーが評価した内容をバックエンドに送信。

### 5.2 評価データの保存

- 以下のデータを保存：
  - 評価内容（良い/悪い）
  - ポエムID
  - 評価日時
  - ユーザーID（匿名で保存可能）

### 5.3 データの活用

- 評価データを分析し、AIモデルの改善に活用。

---

## 6. 非機能要件

### 6.1 パフォーマンス要件

- ポエム生成は5秒以内に完了すること。
- 同時アクセス数: 最大200ユーザーを想定。

### 6.2 セキュリティ要件

- **データ保存**:
  - ユーザーが提供したデータを安全に保存。
  - S3バケットやデータベースへのアクセスを制限。
- **プライバシー**:
  - 提供されたキャラクター情報の利用目的を明示し、同意を得る。

### 6.3 拡張性

- 将来的に多言語対応を追加。
- ユーザーが提供したキャラクター情報を他のプロジェクトと連携可能にする。

---

## 7. 開発スケジュール

### 7.1 フェーズ1: 基本機能の実装 (3ヶ月)

1. 写真アップロード機能の実装。
2. AIによる画像テーマ抽出およびポエム生成機能の統合。
3. キャラクター情報入力機能の実装。

### 7.2 フェーズ2: 評価機能の追加 (1ヶ月)

1. ポエム評価機能の実装。
2. 評価データの保存およびバックエンド統合。

### 7.3 フェーズ3: 拡張機能の実装 (2ヶ月)

1. 多言語対応。
2. ユーザー認証機能の追加。

---

## 8. リスクと対応策

### 8.1 リスク

1. **AIの精度不足**:
   - 十分な学習データがない場合、生成結果の品質が低下。
2. **評価データの偏り**:
   - 一部のユーザーによる極端な評価がモデルを歪める可能性。

### 8.2 対策

1. **AIの精度向上**:
   - 学習データを増やし、生成内容の品質を継続的に向上。
2. **データのフィルタリング**:
   - 評価データを集計し、偏りを排除するアルゴリズムを導入。

---

## 9. 法的および倫理的配慮

- ユーザーが入力したデータが安全に扱われ、AIへの学習目的以外に使用されないことを明示。
- プライバシーポリシーに、データの取り扱いと商用利用の可能性を明記。

---
